(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){e.exports=a(43)},29:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(21),c=a.n(r),i=a(5),l=a(6),s=a(8),u=a(7),h=a(9),m=a(18),f="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:d},g=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},b=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},k=(a(29),a(12)),v=a(14),y=a.n(v),E=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleOnChangeShelf=function(e,t){a.props.onChangeShelf&&a.props.onChangeShelf(e,t)},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.shelfTitle;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},n),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},a.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("a",{href:t.previewLink,target:"_black",rel:"noopener"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:188,backgroundImage:"url(".concat(t.imageLinks.smallThumbnail,")")}})),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",null,o.a.createElement("select",{onChange:function(a){e.handleOnChangeShelf(t,a.target.value)},value:t.shelf?t.shelf:"none"},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none",defaultChecked:"true"},"None"))))),o.a.createElement("div",{className:"book-title"},o.a.createElement("a",{href:t.previewLink,target:"_black",rel:"noopener"},t.title)),o.a.createElement("div",{className:"book-authors"},t.authors?t.authors.map(function(e){return"".concat(e," ")}):t.publisher)))}))))}}]),t}(n.Component);E.PropsTypes={books:y.a.array.isRequired,shelfTitle:y.a.string.isRequired,onChangeShelf:y.a.func.isRequired};var C=E,S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",searchTerm:"android",books:[],loading:!0},a.handleTermChange=function(e){a.setState(function(){return{loading:!0}});var t=e.target.value;b(t).then(function(e){a.setState(function(){return{books:e,searchTerm:t,loading:!1}})})},a.changeShelf=function(e,t){g(e,t).then(function(e){a.componentDidMount()})},a.updateQuery=function(e){a.setState(function(){return{query:e}})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"searchBook",value:function(e){var t=this;b(e).then(function(e){t.setState(function(){return{books:e,loading:!1}})})}},{key:"componentDidMount",value:function(){this.searchBook(this.state.searchTerm)}},{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.searchTerm,r=t.books,c=t.query,i=""===c?r:r.filter(function(e){return e.title.toLowerCase().includes(c.toLowerCase())||(e.authors?e.authors.toString().toLowerCase().includes(c.toLowerCase()):e.publisher.toString().toLowerCase().includes(c.toLowerCase()))});return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar",style:{backgroundColor:"#fff"}},o.a.createElement(k.b,{className:"close-search",to:"/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{onChange:function(t){e.updateQuery(t.target.value.trim())},value:c,type:"text",placeholder:"Search by title or author"})),o.a.createElement("select",{className:"search-books-terms",onChange:this.handleTermChange},["Android","Art","Artificial Intelligence","Astronomy","Austen","Baseball","Basketball","Bhagat","Biography","Brief","Business","Camus","Cervantes","Christie","Classics","Comics","Cook","Cricket","Cycling","Desai","Design","Development","Digital Marketing","Drama","Drawing","Dumas","Education","Everything","Fantasy","Film","Finance","First","Fitness","Football","Future","Games","Gandhi","Homer","Horror","Hugo","Ibsen","Journey","Kafka","King","Lahiri","Larsson","Learn","Literary Fiction","Make","Manage","Marquez","Money","Mystery","Negotiate","Painting","Philosophy","Photography","Poetry","Production","Programming","React","Redux","River","Robotics","Rowling","Satire","Science Fiction","Shakespeare","Singh","Swimming","Tale","Thrun","Time","Tolstoy","Travel","Ultimate","Virtual Reality","Web Development","iOS"].map(function(e){return o.a.createElement("option",{key:e.toLowerCase(),value:e.toLowerCase()},e)}))),o.a.createElement("div",{className:"search-books-results",style:{marginTop:"1.5rem"}},o.a.createElement("ol",{className:"books-grid"},a?o.a.createElement("h4",null,"Loading result..."):o.a.createElement(C,{onChangeShelf:function(t,a){e.changeShelf(t,a)},shelfTitle:"Showing ".concat(i.length," result for ").concat(n.toLocaleUpperCase()),books:i}))))}}]),t}(n.Component),N=a(10),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={books:[],loading:!0,updateMessage:o.a.createElement(O,null)},a.changeShelf=function(e,t){g(e,t).then(function(e){a.componentDidMount()})},a}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(f,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState(function(){return{books:t,loading:!1}})}).catch(function(t){e.setState(function(){return{updateMessage:o.a.createElement(O,{error:!0})}})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.books,n=t.loading,r=t.updateMessage,c=a===[]?a:a.filter(function(e){return"currentlyReading"===e.shelf}),i=a===[]?a:a.filter(function(e){return"wantToRead"===e.shelf}),l=a===[]?a:a.filter(function(e){return"read"===e.shelf});return o.a.createElement("div",{className:"app"},o.a.createElement(N.a,{exact:!0,path:"/",render:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,n?o.a.createElement("div",{style:{margin:"auto",fontWeight:"400",textAlign:"center"}},r):o.a.createElement(C,{onChangeShelf:function(t,a){e.changeShelf(t,a)},shelfTitle:"Currently Reading",books:c}),n?function(){}:o.a.createElement(C,{onChangeShelf:function(t,a){e.changeShelf(t,a)},shelfTitle:"Want To Read",books:i}),n?function(){}:o.a.createElement(C,{onChangeShelf:function(t,a){e.changeShelf(t,a)},shelfTitle:"Read",books:l}))))}}),o.a.createElement(N.a,{path:"/search",render:function(){return o.a.createElement(S,null)}}),o.a.createElement("div",{className:"open-search"},o.a.createElement(k.b,{to:"/search",className:"button"},"Add a book")))}}]),t}(n.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.props.error?o.a.createElement("div",{className:"spinner-container"},o.a.createElement("h3",{style:{maxWidth:"540px"}},"Unable you get your books, please check your internet connection and refresh")):o.a.createElement("div",{className:"spinner-container"},o.a.createElement("div",{className:"spinner"}))}}]),t}(n.Component),w=j;a(41);c.a.render(o.a.createElement(k.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[24,2,1]]]);
//# sourceMappingURL=main.4da0b2b7.chunk.js.map